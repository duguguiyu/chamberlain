# Mock æ•°æ®æ›´æ–°è¯´æ˜

## ğŸ“… æ›´æ–°æ—¶é—´
2025-10-10

## ğŸ”§ ä¿®å¤çš„é—®é¢˜

### é—®é¢˜æè¿°
åœºæ™¯ï¼ˆSceneï¼‰çš„ Mock æ•°æ®ä¸­ `conditionList` å­—æ®µçš„æ•°æ®ç»“æ„ä¸æ­£ç¡®ã€‚

**é”™è¯¯çš„æ•°æ®ç»“æ„**ï¼š
```json
"conditionList": [
  { "key": "environment", "value": "ç¯å¢ƒ" },
  { "key": "customer", "value": "å®¢æˆ·" }
]
```

è¿™ç§ç»“æ„ç¼ºå°‘äº†å¿…è¦çš„å­—æ®µï¼Œå¯¼è‡´å‰ç«¯æ— æ³•æ­£ç¡®æ˜¾ç¤ºæ¡ä»¶ä¿¡æ¯ã€‚

### æ­£ç¡®çš„æ•°æ®ç»“æ„

æ ¹æ® Chamberlain åè®®å®šä¹‰ï¼Œ`conditionList` åº”è¯¥åŒ…å«å®Œæ•´çš„æ¡ä»¶å®šä¹‰ï¼š

```json
"conditionList": [
  {
    "key": "environment",
    "name": "ç¯å¢ƒ",
    "type": "string",
    "values": ["dev", "test", "staging", "prod"]
  },
  {
    "key": "customer",
    "name": "å®¢æˆ·",
    "type": "string"
  }
]
```

### å­—æ®µè¯´æ˜

- **key**: æ¡ä»¶çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆå¿…å¡«ï¼‰
- **name**: æ¡ä»¶çš„æ˜¾ç¤ºåç§°ï¼ˆå¿…å¡«ï¼‰
- **type**: å€¼çš„ç±»å‹ï¼Œå¦‚ "string", "number", "boolean"ï¼ˆå¿…å¡«ï¼‰
- **values**: å¯é€‰å€¼åˆ—è¡¨ï¼ˆå¯é€‰ï¼Œç”¨äºä¸‹æ‹‰é€‰æ‹©ï¼‰

---

## âœ… å·²ä¿®å¤çš„åœºæ™¯

### 1. MySQL æ•°æ®åº“é…ç½® (`mysql_database_config`)

**æ›´æ–°å‰**ï¼š
```json
"conditionList": [
  { "key": "environment", "value": "ç¯å¢ƒ" },
  { "key": "customer", "value": "å®¢æˆ·" }
]
```

**æ›´æ–°å**ï¼š
```json
"conditionList": [
  {
    "key": "environment",
    "name": "ç¯å¢ƒ",
    "type": "string",
    "values": ["dev", "test", "staging", "prod"]
  },
  {
    "key": "customer",
    "name": "å®¢æˆ·",
    "type": "string"
  }
]
```

### 2. Redis ç¼“å­˜é…ç½® (`redis_cache_config`)

**æ›´æ–°å‰**ï¼š
```json
"conditionList": [
  { "key": "environment", "value": "ç¯å¢ƒ" }
]
```

**æ›´æ–°å**ï¼š
```json
"conditionList": [
  {
    "key": "environment",
    "name": "ç¯å¢ƒ",
    "type": "string",
    "values": ["dev", "test", "prod"]
  }
]
```

### 3. åº”ç”¨åŠŸèƒ½å¼€å…³ (`app_feature_flags`)

**æ›´æ–°å‰**ï¼š
```json
"conditionList": [
  { "key": "environment", "value": "ç¯å¢ƒ" },
  { "key": "region", "value": "åœ°åŒº" }
]
```

**æ›´æ–°å**ï¼š
```json
"conditionList": [
  {
    "key": "environment",
    "name": "ç¯å¢ƒ",
    "type": "string",
    "values": ["dev", "test", "prod"]
  },
  {
    "key": "region",
    "name": "åœ°åŒº",
    "type": "string",
    "values": ["cn-north", "cn-south", "cn-east", "cn-west"]
  }
]
```

---

## ğŸ¯ å½±å“èŒƒå›´

### å‰ç«¯æ˜¾ç¤º
ä¿®å¤åï¼Œåœºæ™¯åˆ—è¡¨é¡µé¢çš„"æ¡ä»¶æ•°é‡"åˆ—å°†æ­£ç¡®æ˜¾ç¤ºï¼š
- MySQL æ•°æ®åº“é…ç½®: 2 ä¸ªæ¡ä»¶
- Redis ç¼“å­˜é…ç½®: 1 ä¸ªæ¡ä»¶
- åº”ç”¨åŠŸèƒ½å¼€å…³: 2 ä¸ªæ¡ä»¶

### ç»„ä»¶è¡Œä¸º
- **SceneTable**: æ­£ç¡®æ˜¾ç¤ºæ¡ä»¶æ•°é‡
- **SceneDescriptions**: æ­£ç¡®æ˜¾ç¤ºæ¡ä»¶è¯¦æƒ…
- **SceneForm**: å¯ä»¥æ­£ç¡®ç¼–è¾‘æ¡ä»¶

---

## ğŸš€ éƒ¨ç½²æ›´æ–°

### 1. é‡æ–°æ„å»º
```bash
cd /Users/advance/workspace/chamberlain/examples/demo-app
pnpm build
```

### 2. é‡å¯å¼€å‘æœåŠ¡å™¨
```bash
pnpm dev
```

### 3. éªŒè¯æ›´æ–°
è®¿é—® http://localhost:8000/scenes æŸ¥çœ‹åœºæ™¯åˆ—è¡¨ï¼Œç¡®è®¤"æ¡ä»¶æ•°é‡"åˆ—æ˜¾ç¤ºæ­£ç¡®ã€‚

---

## ğŸ“ æ³¨æ„äº‹é¡¹

### æ•°æ®ä¸€è‡´æ€§
- `availableConditions` å’Œ `conditionList` ç°åœ¨ä½¿ç”¨ç›¸åŒçš„æ•°æ®ç»“æ„
- è¿™ä½¿å¾—æ•°æ®æ›´åŠ ä¸€è‡´å’Œæ˜“äºç»´æŠ¤

### å‘åå…¼å®¹
- æ–°çš„æ•°æ®ç»“æ„åŒ…å«äº†æ›´å¤šä¿¡æ¯ï¼Œä½†ä¿æŒäº†å‘åå…¼å®¹
- æ—§çš„ä»£ç å¯èƒ½éœ€è¦æ›´æ–°ä»¥ä½¿ç”¨æ–°å­—æ®µ

### Mock API
Mock API (`mock/scenes.ts`) ä¹Ÿéœ€è¦æ›´æ–°ä»¥å¤„ç†æ–°çš„æ•°æ®ç»“æ„ï¼Œç‰¹åˆ«æ˜¯ï¼š
- åˆ›å»ºåœºæ™¯æ—¶çš„ `conditions` å‚æ•°
- æ·»åŠ æ¡ä»¶çš„ API ç«¯ç‚¹

---

## âœ¨ æ”¹è¿›å»ºè®®

### çŸ­æœŸ
- [x] ä¿®å¤ Mock æ•°æ®ç»“æ„
- [x] é‡æ–°æ„å»ºå’Œéƒ¨ç½²
- [ ] æµ‹è¯•æ‰€æœ‰åœºæ™¯ç›¸å…³åŠŸèƒ½

### ä¸­æœŸ
- [ ] æ›´æ–° Mock API ä»¥å®Œå…¨æ”¯æŒæ–°ç»“æ„
- [ ] æ·»åŠ æ¡ä»¶ç®¡ç†çš„ UI æµ‹è¯•
- [ ] å®Œå–„æ¡ä»¶éªŒè¯é€»è¾‘

### é•¿æœŸ
- [ ] è€ƒè™‘æ·»åŠ æ¡ä»¶æ¨¡æ¿åŠŸèƒ½
- [ ] æ”¯æŒæ›´å¤æ‚çš„æ¡ä»¶ç±»å‹
- [ ] æ·»åŠ æ¡ä»¶å¯¼å…¥/å¯¼å‡ºåŠŸèƒ½

---

## ğŸ‰ æ€»ç»“

Mock æ•°æ®å·²æˆåŠŸæ›´æ–°ï¼Œ`conditionList` å­—æ®µç°åœ¨åŒ…å«å®Œæ•´çš„æ¡ä»¶å®šä¹‰ä¿¡æ¯ã€‚è¿™ä½¿å¾—ï¼š

1. âœ… å‰ç«¯å¯ä»¥æ­£ç¡®æ˜¾ç¤ºæ¡ä»¶æ•°é‡
2. âœ… æ¡ä»¶è¯¦æƒ…æ˜¾ç¤ºæ›´åŠ ä¸°å¯Œ
3. âœ… æ•°æ®ç»“æ„æ›´åŠ è§„èŒƒå’Œä¸€è‡´
4. âœ… ä¸ºæœªæ¥åŠŸèƒ½æ‰©å±•æ‰“ä¸‹åŸºç¡€

æœåŠ¡å™¨å·²é‡æ–°å¯åŠ¨ï¼Œå¯ä»¥è®¿é—® http://localhost:8000 æŸ¥çœ‹æ›´æ–°æ•ˆæœã€‚

